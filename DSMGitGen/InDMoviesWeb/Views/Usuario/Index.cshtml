@model IEnumerable<InDMoviesWeb.Models.UsuarioModel>
@using Microsoft.AspNet.Identity
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Imagen)
           </th>
        <th>
            @Html.DisplayNameFor(model => model.Nick)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Descripcion)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Rol)
        </th>

        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            <img height="100" width="100" src="@Html.DisplayFor(modelItem => item.Imagen)" />
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Nick)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Descripcion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Rol)
        </td>


        <td>
            @if (User.Identity.GetUserName() == item.Email)
            {
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                        <span class="glyphicon glyphicon-cog"></span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li>@Html.ActionLink("Editar", "Edit", new { id = item.Email + '/' })</li>
                        <li>@Html.ActionLink("Detalles", "Details", new { id = item.Email + '/' })</li>
                        <li>@Html.ActionLink("Delete", "Eliminarcuenta", "Manage", null, null)</li>
                    </ul>
                </div>
            }
            else
            {
                <p> @Html.ActionLink("Detalles", "Details", new { id = item.Email + '/' }, new { @class = "btn btn-primary btn-md", @role = "button" }) </p>
            }

    </td>
    </tr>
}

</table>
